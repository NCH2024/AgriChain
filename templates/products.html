{% extends "base.html" %}

{% block title %}Kho h√†ng c·ªßa t√¥i{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="d-flex justify-content-between align-items-center mb-5 glass-box py-4 shadow-sm">
        <div>
            <h2 class="fw-bold mb-1 text-dark">üì¶ Kho h√†ng c·ªßa t√¥i</h2>
            <p class="text-muted small mb-0 fw-medium">Qu·∫£n l√Ω t·∫•t c·∫£ t√†i s·∫£n s·ªë NFT N√¥ng s·∫£n b·∫°n ƒëang s·ªü h·ªØu.</p>
        </div>
        <a href="/dashboard" class="btn btn-lemon shadow-sm">
            <i class="fas fa-plus-circle me-1"></i> T·∫°o l√¥ h√†ng
        </a>
    </div>

    {% if products %}
    <div class="row g-4">
        {% for p in products %}
        <div class="col-md-6 col-lg-3">
            <div class="glass-box h-100 d-flex flex-column p-0 overflow-hidden group-hover-effect border-0 shadow hover-shadow-lg transition-all" style="background: white;">
                <div class="position-relative bg-light" style="height: 200px;">
                    {% if p.image_id %}
                        <img src="/image/{{ p.image_id }}" class="w-100 h-100 object-fit-cover transition-transform">
                    {% else %}
                        <img src="/static/image/blockchain.gif" class="opacity-25 w-50 object-fit-container position-absolute top-50 start-50 translate-middle">
                        
                    {% endif %}
                    
                    <span class="position-absolute top-0 start-0 m-3 badge bg-white text-primary border shadow-sm">
                        {{ p.batch_code }}
                    </span>
                </div>

                <div class="p-4 d-flex flex-column flex-grow-1">
                    <h5 class="fw-bold mb-1 text-dark">{{ p.product_type }}</h5>
                    <p class="text-muted small mb-3 fw-bold">
                        <i class="fas fa-clock me-1 text-lemon"></i> {{ p.timestamp_fmt }}
                    </p>
                    
                    <div class="mt-auto pt-3 border-top d-flex justify-content-between align-items-center">
                        <span class="badge bg-light text-dark border fw-normal text-truncate" style="max-width: 120px;">
                            {{ p.action }}
                        </span>
                        <a href="/products/{{ p.batch_code }}" class="btn btn-sm btn-outline-primary rounded-circle shadow-sm" style="width: 36px; height: 36px; display:flex; align-items:center; justify-content:center;">
                            <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="glass-box text-center py-5 shadow-sm">
        <div class="bg-light rounded-circle d-inline-flex p-4 mb-3">
            <i class="fas fa-box-open fa-3x text-muted opacity-50"></i>
        </div>
        <h4 class="text-dark fw-bold">Kho h√†ng tr·ªëng</h4>
        <p class="text-muted mb-4">B·∫°n ch∆∞a c√≥ l√¥ h√†ng n√†o tr√™n Blockchain.</p>
        <a href="/dashboard" class="btn btn-outline-lemon rounded-pill px-4">B·∫Øt ƒë·∫ßu t·∫°o ngay</a>
    </div>
    {% endif %}
</div>

<style>
    .hover-shadow-lg:hover { transform: translateY(-5px); box-shadow: 0 20px 40px rgba(0,0,0,0.08) !important; }
    .transition-all { transition: all 0.3s ease; }
    .transition-transform { transition: transform 0.5s ease; }
    .group-hover-effect:hover .transition-transform { transform: scale(1.1); }
</style>
{% endblock %}