# ğŸ“– Há»‡ thá»‘ng Truy xuáº¥t nguá»“n gá»‘c NÃ´ng sáº£n Sáº¡ch - AgriChain

**Äá» tÃ i:** Sá»” NHáº¬T KÃ NÃ”NG Sáº¢N Sáº CH (á»¨ng dá»¥ng Blockchain)

---

*   **Lá»›p:** 22TIN-TT
*   **Giáº£ng viÃªn:** VÃµ Thanh Vinh
*   **NhÃ³m:** 4
*   **ThÃ nh viÃªn:** Nguyá»…n ChÃ¡nh Hiá»‡p, Nguyá»…n ChÃ­ Thanh, TiÃªu Quang Thá»‹nh

---

## ğŸ“ MÃ” Táº¢ Äá»€ TÃ€I

### 1. Váº¥n Ä‘á» thá»±c táº¿

NgÆ°á»i tiÃªu dÃ¹ng hiá»‡n nay ráº¥t lo sá»£ vá» váº¥n Ä‘á» thá»±c pháº©m báº©n. CÃ¡c tem nhÃ£n dÃ¡n trÃªn rau cá»§ trong siÃªu thá»‹ cÃ³ thá»ƒ bá»‹ lÃ m giáº£ hoáº·c thay Ä‘á»•i thÃ´ng tin má»™t cÃ¡ch dá»… dÃ ng. Do Ä‘Ã³, khÃ¡ch hÃ ng thiáº¿u má»™t cÃ´ng cá»¥ Ä‘Ã¡ng tin cáº­y Ä‘á»ƒ kiá»ƒm chá»©ng lá»‹ch sá»­ tháº­t sá»± cá»§a má»™t sáº£n pháº©m, tá»« lÃºc gieo háº¡t Ä‘áº¿n khi lÃªn ká»‡.

### 2. Giáº£i phÃ¡p: AgriChain

XÃ¢y dá»±ng má»™t á»©ng dá»¥ng phi táº­p trung (DApp) sá»­ dá»¥ng cÃ´ng nghá»‡ **Blockchain (Cronos Testnet)** Ä‘á»ƒ lÆ°u trá»¯ nháº­t kÃ½ canh tÃ¡c.

*   **KhÃ¡c biá»‡t:** Thay vÃ¬ chá»‰ mÃ´ phá»ng báº±ng cÆ¡ sá»Ÿ dá»¯ liá»‡u thÃ´ng thÆ°á»ng, há»‡ thá»‘ng sá»­ dá»¥ng **Smart Contract (Há»£p Ä‘á»“ng thÃ´ng minh)** Ä‘á»ƒ ghi láº¡i dá»¯ liá»‡u lÃªn máº¡ng lÆ°á»›i Blockchain thá»±c táº¿.
*   **Äiá»ƒm máº¥u chá»‘t:** Dá»¯ liá»‡u má»™t khi Ä‘Ã£ Ä‘Æ°á»£c ghi vÃ o Blockchain sáº½ **khÃ´ng thá»ƒ sá»­a Ä‘á»•i hay xÃ³a bá» (Immutability)**. NgÆ°á»i tiÃªu dÃ¹ng cÃ³ thá»ƒ kiá»ƒm tra mÃ£ giao dá»‹ch (Tx Hash) trá»±c tiáº¿p trÃªn Blockchain Explorer Ä‘á»ƒ xÃ¡c thá»±c tÃ­nh toÃ n váº¹n.

## ğŸ”„ QUY TRÃŒNH HOáº T Äá»˜NG

VÃ²ng Ä‘á»i cá»§a má»™t nÃ´ng sáº£n sáº½ Ä‘Æ°á»£c ghi láº¡i vÃ  truy xuáº¥t nhÆ° sau:

1.  **ÄÄƒng nháº­p & XÃ¡c thá»±c:**
    *   NÃ´ng dÃ¢n Ä‘Äƒng nháº­p vÃ o há»‡ thá»‘ng thÃ´ng qua **VÃ­ Ä‘iá»‡n tá»­ (Metamask/Web3 Wallet)**. Äá»‹a chá»‰ vÃ­ Ä‘Ã³ng vai trÃ² lÃ  Ä‘á»‹nh danh duy nháº¥t cá»§a ngÆ°á»i sáº£n xuáº¥t.

2.  **Ghi nháº­t kÃ½ canh tÃ¡c (Giao dá»‹ch Blockchain):**
    *   Má»—i khi thá»±c hiá»‡n má»™t cÃ´ng viá»‡c (Gieo trá»“ng, BÃ³n phÃ¢n, Thu hoáº¡ch), nÃ´ng dÃ¢n nháº­p thÃ´ng tin vÃ  táº£i áº£nh minh chá»©ng.
    *   **áº¢nh:** ÄÆ°á»£c upload lÃªn **Cloudinary** Ä‘á»ƒ tá»‘i Æ°u lÆ°u trá»¯.
    *   **Dá»¯ liá»‡u:** ThÃ´ng tin lÃ´ hÃ ng, hÃ nh Ä‘á»™ng, vÃ  thá»i gian Ä‘Æ°á»£c gá»­i lÃªn **Smart Contract** trÃªn máº¡ng **Cronos Testnet**.
    *   Há»‡ thá»‘ng lÆ°u trá»¯ Hash giao dá»‹ch vÃ  liÃªn káº¿t áº£nh vÃ o MongoDB Ä‘á»ƒ phá»¥c vá»¥ hiá»ƒn thá»‹ nhanh.

3.  **Táº¡o mÃ£ QR Ä‘á»‹nh danh:**
    *   Má»—i lÃ´ hÃ ng (`batch_code`) sáº½ Ä‘Æ°á»£c há»‡ thá»‘ng táº¡o má»™t mÃ£ QR duy nháº¥t.
    *   MÃ£ QR nÃ y chá»©a Ä‘Æ°á»ng dáº«n Ä‘áº¿n trang truy xuáº¥t nguá»“n gá»‘c cÃ´ng khai (`/trace/<batch_code>`).

4.  **NgÆ°á»i tiÃªu dÃ¹ng kiá»ƒm tra:**
    *   KhÃ¡ch hÃ ng quÃ©t mÃ£ QR trÃªn sáº£n pháº©m.
    *   Há»‡ thá»‘ng tá»± Ä‘á»™ng truy váº¥n dá»¯ liá»‡u trá»±c tiáº¿p tá»« **Blockchain** (Ä‘á»ƒ láº¥y thÃ´ng tin xÃ¡c thá»±c) vÃ  káº¿t há»£p vá»›i hÃ¬nh áº£nh tá»« cÆ¡ sá»Ÿ dá»¯ liá»‡u Ä‘á»ƒ hiá»ƒn thá»‹ toÃ n bá»™ lá»‹ch sá»­ canh tÃ¡c.

## ğŸ› ï¸ KIáº¾N TRÃšC Há»† THá»NG & CÃ”NG NGHá»† (TECH STACK)

Há»‡ thá»‘ng Ä‘Æ°á»£c xÃ¢y dá»±ng dá»±a trÃªn kiáº¿n trÃºc hiá»‡n Ä‘áº¡i káº¿t há»£p giá»¯a Web2 vÃ  Web3:

*   **Táº§ng Blockchain (Web3 Layer)**:
    *   **Máº¡ng lÆ°á»›i:** Cronos Testnet (EVM Compatible).
    *   **Smart Contract:** Viáº¿t báº±ng ngÃ´n ngá»¯ **Solidity**. Chá»‹u trÃ¡ch nhiá»‡m lÆ°u trá»¯ cÃ¡c báº£n ghi nháº­t kÃ½ báº¥t biáº¿n.
    *   **Giao tiáº¿p:** Sá»­ dá»¥ng thÆ° viá»‡n `Web3.py` Ä‘á»ƒ káº¿t ná»‘i Backend vá»›i Blockchain Node (RPC).

*   **Táº§ng Backend (Application Layer - `Flask`)**:
    *   XÃ¢y dá»±ng báº±ng **Python Flask**.
    *   Xá»­ lÃ½ logic nghiá»‡p vá»¥, xÃ¡c thá»±c vÃ­, upload áº£nh lÃªn Cloudinary.
    *   ÄÃ³ng vai trÃ² cáº§u ná»‘i (Middleware) giá»¯a ngÆ°á»i dÃ¹ng vÃ  Blockchain.

*   **Táº§ng Dá»¯ liá»‡u (Database Layer)**:
    *   **MongoDB:** LÆ°u trá»¯ thÃ´ng tin ngÆ°á»i dÃ¹ng, metadata cá»§a áº£nh, vÃ  cache lá»‹ch sá»­ giao dá»‹ch (Transaction Hash) Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ truy váº¥n.
    *   **Cloudinary:** LÆ°u trá»¯ hÃ¬nh áº£nh minh chá»©ng hoáº¡t Ä‘á»™ng canh tÃ¡c cháº¥t lÆ°á»£ng cao.

*   **Táº§ng Hiá»ƒn thá»‹ (Frontend)**:
    *   HTML5, CSS3 (Glassmorphism UI), JavaScript.
    *   TÃ­ch há»£p hiá»ƒn thá»‹ dá»¯ liá»‡u minh báº¡ch tá»« Blockchain.

## ğŸ§± Cáº¤U TRÃšC Dá»® LIá»†U TRÃŠN SMART CONTRACT

Dá»¯ liá»‡u trÃªn Blockchain khÃ´ng lÆ°u dÆ°á»›i dáº¡ng JSON thÃ´ng thÆ°á»ng mÃ  Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a báº±ng `Struct` trong Solidity Ä‘á»ƒ tá»‘i Æ°u hÃ³a chi phÃ­ (Gas fee) vÃ  Ä‘áº£m báº£o tÃ­nh cháº·t cháº½:

```solidity
struct LoHang {
    string batch_code;    // MÃ£ lÃ´ hÃ ng (VÃ­ dá»¥: RAU-001)
    string product_type;  // Loáº¡i sáº£n pháº©m (VÃ­ dá»¥: Cáº£i báº¹ xanh)
    string action;        // HÃ nh Ä‘á»™ng (VÃ­ dá»¥: BÃ³n phÃ¢n)
    string details;       // Chi tiáº¿t ghi chÃº
    uint256 timestamp;    // Thá»i gian ghi nháº­n (Láº¥y tá»« thá»i gian thá»±c cá»§a Block)
    address owner;        // Äá»‹a chá»‰ vÃ­ cá»§a ngÆ°á»i thá»±c hiá»‡n (Äá»‹nh danh ngÆ°á»i nÃ´ng dÃ¢n)
}
```

## ğŸš€ TÃNH NÄ‚NG CHÃNH

1.  **Quáº£n lÃ½ nháº­t kÃ½ (Dashboard):** Xem thá»‘ng kÃª cÃ¡c hoáº¡t Ä‘á»™ng, biá»ƒu Ä‘á»“ tá»· lá»‡ loáº¡i sáº£n pháº©m.
2.  **Truy xuáº¥t nguá»“n gá»‘c (Traceability):** Giao diá»‡n Timeline hiá»ƒn thá»‹ lá»‹ch sá»­ tá»« má»›i Ä‘áº¿n cÅ©, káº¿t há»£p dá»¯ liá»‡u tá»« Blockchain vÃ  hÃ¬nh áº£nh thá»±c táº¿.
3.  **Minh báº¡ch thÃ´ng tin:** Hiá»ƒn thá»‹ rÃµ rÃ ng Transaction Hash (MÃ£ giao dá»‹ch) vÃ  liÃªn káº¿t Ä‘áº¿n Blockchain Explorer Ä‘á»ƒ ngÆ°á»i dÃ¹ng tá»± kiá»ƒm chá»©ng.
4.  **Upload áº£nh:** TÃ­ch há»£p API Cloudinary Ä‘á»ƒ lÆ°u trá»¯ áº£nh cháº¥t lÆ°á»£ng cao.

---
*Dá»± Ã¡n Ä‘Æ°á»£c phÃ¡t triá»ƒn cho mÃ´n há»c CÃ´ng nghá»‡ Chuá»—i khá»‘i (Blockchain Technology).*